{"version":3,"sources":["sprite.ts"],"names":[],"mappings":"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","file":"sprite.js","sourcesContent":["//sprite\r\n//形状\r\nenum SHAPE{\r\n rect,\r\n circle\r\n}\r\nclass Sprite {\r\n    ///\r\n    context: any;//画布对象\r\n    x: number = 0;//x坐标\r\n    y: number = 0;//y坐标\r\n    w: number = 0;//宽度 \r\n    h: number = 0;//高度\r\n    sw: number = 0;//剪裁的宽\r\n    sh: number = 0;//前裁的高\r\n    sx: number = 0;//剪裁的x\r\n    sy: number = 0;//前裁的y\r\n    r:number = 0 ;//半径\r\n    img: any;//图像地址\r\n    shape:SHAPE = SHAPE.rect;//默认方形\r\n    constructor(context: any, url: string) {\r\n        this.getImg(url);\r\n        this.context = context;\r\n    }\r\n    setImg(url: string) {\r\n        this.getImg(url);\r\n    }\r\n    getImg(url: string): void {\r\n        //地址转换成img对象 \r\n        this.img = new Image();\r\n        this.img.src = url;\r\n\r\n        // this.img = document.createElement('img');\r\n        // this.img.src = url;\r\n        // console.log(this.img.readyState)\r\n        // this.img.onreadystatechange=function(){\r\n        //     console.log(222,this.img.readyState)\r\n        // }\r\n        this.img.onload = function () {\r\n            console.log('loaded')\r\n        }\r\n        // this.img = document.createElement('img');\r\n        // this.img.src = url;\r\n    }\r\n    setSize(w?:number, h?:number) {\r\n        this.w = w||this.w;\r\n        this.h = h||this.h;\r\n        this.r = this.h/2;\r\n    }\r\n    getCenter(){\r\n        //圆心位置\r\n        return [this.x +this.r,this.y +this.r];\r\n    }\r\n    setCutSize(sw:number, sh:number) {\r\n        this.sw = sw;\r\n        this.sh = sh;\r\n    }\r\n    setPosition(x:number, y:number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    draw(angle?:number) {\r\n        this.context.save();\r\n        if(angle){\r\n            this.context.translate(this.x+this.r ,this.y+this.r)\r\n            this.context.rotate(angle);\r\n            this.context.translate(-(this.x+this.r) ,-(this.y+this.r));\r\n        } \r\n        if (this.sw && this.sh) {\r\n            this.context.drawImage(this.img, this.sx, this.sy, this.sw, this.sh, this.x, this.y, this.w, this.h);\r\n        } else {\r\n            //不需要剪切\r\n            this.context.drawImage(this.img, this.x, this.y, this.w, this.h);\r\n        }\r\n        // this.context.drawImage(this.img,10,10);\r\n        this.context.restore();\r\n    }\r\n}"]}